{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Lighter comes with a small"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Lighter-swift\/PerformanceTestSuite"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"It uses the (larger, populated)"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/jpwhite3\/northwind-SQLite3\/"},{"type":"text","text":" "},{"type":"text","text":"database as the base set."},{"type":"text","text":" "},{"type":"text","text":"It doesn’t have the goal to be scientifically proper."}]},{"anchor":"Results","level":3,"type":"heading","text":"Results"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The suite evaluates the load performance on queries against the “Orders” table,"},{"type":"text","text":" "},{"type":"text","text":"which has 16K records. The test loads all 16K records on each iteration."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Lighter is expected to perform excellent, as it directly\/statically binds"},{"type":"text","text":" "},{"type":"text","text":"SQLite prepared statements for the generated structures."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"M1 Mini with 10 rampup iterations and 500 test iterations."}]},{"type":"codeListing","syntax":null,"code":["Orders.fetchAll    setup    rampup   duration","  Enlighter SQLite 0        0,135s     6,629s   ~20% faster than Lighter (75\/s)","  Lighter          0        0,162s     7,927s   Baseline                 (63\/s)","  GRDB             -        -        ~12s       Handwritten Mapping","  SQLite.swift     0        0,613s    30,643s   Handwritten Mapping (>3× slower) (16\/s)","  GRDB             0,001    0,995s    49,404s   Codable (>6× slower)     (10\/s)","  SQLite.swift     0,001    3,109s   153,172s   Codable (>19× slower)    (3\/s)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Essentially the specific testcase - with no handcrafting involved - needs 30"},{"type":"text","text":" "},{"type":"text","text":"secs on GRDB, which is state of the art, 2.5 minutes w\/ SQLite.swift and"},{"type":"text","text":" "},{"type":"text","text":"not quite 8 secs with the Lighter API."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As a chart:"}]},{"type":"codeListing","syntax":null,"code":["┌─────────────────────────────────────────────────────────────────────────────┐","├─┐                                                                           │","│S│                Enlighter generated raw SQLite API Bindings   ~20% faster  │","├─┘                                                                           │","├──┐                                                                          │","│L3│               Lighter, w\/ high level API (baseline)            Baseline  │","├──┘                                                                          │","├─────┐                                                                       │","│GRDB │            with handwritten record mappings              ~50% slower  │","├─────┘                                                                       │","├─────────────┐                                                               │","│SQLite.swift │    with handwritten record mappings               >3× slower  │","├─────────────┘                                                               │","├───────────────────────┐                                                     │","│GRDB with Codable      │                                         >6× slower  │","├───────────────────────┘                                                     │","├───────────────────────────────────────────────────────────────────────────┐ │","│SQLite.swift with Codable                                       >19× slower│ │","├───────────────────────────────────────────────────────────────────────────┘ │","└─────────────────────────────────────────────────────────────────────────────┘","      Time to load the Northwind \"Products\" table 500 times into a model.      ","                              Shorter is faster.                               "]},{"type":"paragraph","inlineContent":[{"type":"emphasis","inlineContent":[{"type":"text","text":"Main takeway"}]},{"type":"text","text":": Never ever use Codable."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/lighter\/performance"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Lighter\/documentation\/Lighter\/Performance","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"A quick look at Lighter performance."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Performance","role":"article","modules":[{"name":"Lighter.swift for SQLite3"}]},"hierarchy":{"paths":[["doc:\/\/Lighter\/documentation\/Lighter"]]},"seeAlsoSections":[{"title":"Advanced","identifiers":["doc:\/\/Lighter\/documentation\/Lighter\/Configuration","doc:\/\/Lighter\/documentation\/Lighter\/Linux","doc:\/\/Lighter\/documentation\/Lighter\/Manual","doc:\/\/Lighter\/documentation\/Lighter\/SQLiteAPI","doc:\/\/Lighter\/documentation\/Lighter\/Mapping"],"generated":true}],"references":{"doc://Lighter/documentation/Lighter/Mapping":{"role":"collectionGroup","title":"Mapping","abstract":[{"type":"text","text":"Mapping Data retrieved from the Database."}],"identifier":"doc:\/\/Lighter\/documentation\/Lighter\/Mapping","kind":"article","type":"topic","url":"\/documentation\/lighter\/mapping"},"doc://Lighter/documentation/Lighter/Manual":{"role":"article","title":"Manual Generation","abstract":[{"type":"text","text":"How to generate Lighter content by hand."}],"identifier":"doc:\/\/Lighter\/documentation\/Lighter\/Manual","kind":"article","type":"topic","url":"\/documentation\/lighter\/manual"},"doc://Lighter/documentation/Lighter/Linux":{"role":"article","title":"Linux","abstract":[{"type":"text","text":"Using Lighter on Linux."}],"identifier":"doc:\/\/Lighter\/documentation\/Lighter\/Linux","kind":"article","type":"topic","url":"\/documentation\/lighter\/linux"},"doc://Lighter/documentation/Lighter":{"role":"collection","title":"Lighter.swift for SQLite3","abstract":[{"type":"text","text":"Type-safe down to the schema. Very, "},{"type":"strong","inlineContent":[{"type":"text","text":"very"}]},{"type":"text","text":", fast. Dependency free."}],"identifier":"doc:\/\/Lighter\/documentation\/Lighter","kind":"symbol","type":"topic","url":"\/documentation\/lighter"},"doc://Lighter/documentation/Lighter/SQLiteAPI":{"role":"article","title":"Dependency-Free API","abstract":[{"type":"text","text":"Using the dependency-free SQLite API."}],"identifier":"doc:\/\/Lighter\/documentation\/Lighter\/SQLiteAPI","kind":"article","type":"topic","url":"\/documentation\/lighter\/sqliteapi"},"https://github.com/Lighter-swift/PerformanceTestSuite":{"title":"performance test suite","titleInlineContent":[{"type":"text","text":"performance test suite"}],"type":"link","identifier":"https:\/\/github.com\/Lighter-swift\/PerformanceTestSuite","url":"https:\/\/github.com\/Lighter-swift\/PerformanceTestSuite"},"doc://Lighter/documentation/Lighter/Configuration":{"role":"article","title":"Configuration","abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"Lighter.json"},{"type":"text","text":" configuration file."}],"identifier":"doc:\/\/Lighter\/documentation\/Lighter\/Configuration","kind":"article","type":"topic","url":"\/documentation\/lighter\/configuration"},"https://github.com/jpwhite3/northwind-SQLite3/":{"title":"Northwind SQLite","titleInlineContent":[{"type":"text","text":"Northwind SQLite"}],"type":"link","identifier":"https:\/\/github.com\/jpwhite3\/northwind-SQLite3\/","url":"https:\/\/github.com\/jpwhite3\/northwind-SQLite3\/"}}}